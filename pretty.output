Feature: Common Template Requirements # tests/e2e/features/common-templates.feature:1
  As a developer
  I want all devcontainers to meet standards
  Scenario: Rust template creates valid project                     # tests/e2e/features/common-templates.feature:5
    Given I am using the "shell-script" generator                   # None
    When I create a project named "test-rust" using template "rust" # None
    Then the project should be created successfully                 # None
    And the devcontainer should build successfully                  # None
    And Rust should be installed in the container                   # None
    And cargo should be available in the container                  # None

  Scenario: Go template creates valid project                   # tests/e2e/features/common-templates.feature:13
    Given I am using the "shell-script" generator               # None
    When I create a project named "test-go" using template "go" # None
    Then the project should be created successfully             # None
    And the devcontainer should build successfully              # None
    And Go should be installed in the container                 # None
    And golangci-lint should be available                       # None

Feature: Concurrent Project Creation # tests/e2e/features/concurrent-operations.feature:1
  As a developer
  I want to create multiple projects simultaneously
  So that I can quickly set up multiple development environments
  @concurrent
  Scenario: Multiple projects can be created in same workspace                                                                        # tests/e2e/features/concurrent-operations.feature:7
    Given I am using the "shell-script" generator                                                                                     # tests/e2e/features/steps/generator_steps.py:11
    When I create projects named "test-concurrent-1", "test-concurrent-2", "test-concurrent-3" using template "python" simultaneously # tests/e2e/features/steps/concurrent_steps.py:14
    Then all projects should be created successfully                                                                                  # tests/e2e/features/steps/concurrent_steps.py:45
    And each project should have independent structure                                                                                # tests/e2e/features/steps/concurrent_steps.py:54

  @concurrent
  Scenario: Different templates can be created simultaneously                                                    # tests/e2e/features/concurrent-operations.feature:14
    Given I am using the "shell-script" generator                                                                # tests/e2e/features/steps/generator_steps.py:11
    When I create "test-python" using template "python" and "test-nodejs" using template "nodejs" simultaneously # tests/e2e/features/steps/concurrent_steps.py:70
    Then both projects should be created successfully                                                            # tests/e2e/features/steps/concurrent_steps.py:99

  @concurrent
  Scenario: Same project name cannot be created twice           # tests/e2e/features/concurrent-operations.feature:20
    Given I am using the "shell-script" generator               # tests/e2e/features/steps/generator_steps.py:11
    And project "test-duplicate" exists                         # tests/e2e/features/steps/edge_case_steps.py:133
    When I attempt to create "test-duplicate" again             # tests/e2e/features/steps/edge_case_steps.py:144
    Then creation should fail or handle duplicate appropriately # tests/e2e/features/steps/edge_case_steps.py:156

Feature: Configuration Options # tests/e2e/features/configuration.feature:1
  As a developer
  I want to configure proxy and Claude provider settings
  So that I can customize the devcontainer for my environment
  @config
  Scenario: Proxy settings should be applied                                                                           # tests/e2e/features/configuration.feature:7
    Given I am using the "shell-script" generator                                                                      # tests/e2e/features/steps/generator_steps.py:11
    When I create a project named "test-proxy" using template "python" with HTTP proxy "http://proxy.example.com:8080" # tests/e2e/features/steps/config_steps.py:12
    Then the project should be created successfully                                                                    # tests/e2e/features/steps/validation_steps.py:23
    And proxy configuration should exist in devcontainer                                                               # tests/e2e/features/steps/config_steps.py:74

  @config
  Scenario: Claude provider option should be applied                                                       # tests/e2e/features/configuration.feature:14
    Given I am using the "shell-script" generator                                                          # tests/e2e/features/steps/generator_steps.py:11
    When I create a project named "test-provider" using template "python" with Claude provider "anthropic" # tests/e2e/features/steps/config_steps.py:59
    Then the project should be created successfully                                                        # tests/e2e/features/steps/validation_steps.py:23
    And Claude provider should be configured                                                               # tests/e2e/features/steps/config_steps.py:101

  @config
  Scenario: Custom Claude version should be applied                                                         # tests/e2e/features/configuration.feature:21
    Given I am using the "shell-script" generator                                                           # tests/e2e/features/steps/generator_steps.py:11
    When I create a project named "test-claude-version" using template "python" with Claude version "1.2.3" # tests/e2e/features/steps/config_steps.py:27
    Then the project should be created successfully                                                         # tests/e2e/features/steps/validation_steps.py:23
    And Claude version should be configured                                                                 # tests/e2e/features/steps/config_steps.py:133

  @config
  Scenario: Both proxy and provider options should work together                                                                                       # tests/e2e/features/configuration.feature:28
    Given I am using the "shell-script" generator                                                                                                      # tests/e2e/features/steps/generator_steps.py:11
    When I create a project named "test-combo" using template "python" with Claude provider "anthropic" and HTTP proxy "http://proxy.example.com:8080" # tests/e2e/features/steps/config_steps.py:42
    Then the project should be created successfully                                                                                                    # tests/e2e/features/steps/validation_steps.py:23
    And both configurations should be applied                                                                                                          # tests/e2e/features/steps/config_steps.py:165

Feature: VS Code Dev Containers CLI # tests/e2e/features/devcontainers-cli.feature:1
  As a developer
  I want the devcontainer to work with VS Code Dev Containers CLI
  So that it works identically to VS Code
  @cli
  Scenario: Dev container starts successfully for Python                                        # tests/e2e/features/devcontainers-cli.feature:7
    Given I am using the "shell-script" generator                                               # None
    When I create a project named "test-cli-python" using template "python" with version "3.12" # None
    Then the project should be created successfully                                             # None
    When I start the devcontainer for the project                                               # None
    Then postCreateCommand should have executed successfully                                    # None
    And devcontainer features should be installed                                               # None
    And I can execute commands in the devcontainer                                              # None

  @cli
  Scenario: Dev container starts successfully for Node.js                                     # tests/e2e/features/devcontainers-cli.feature:17
    Given I am using the "shell-script" generator                                             # None
    When I create a project named "test-cli-nodejs" using template "nodejs" with version "22" # None
    Then the project should be created successfully                                           # None
    When I start the devcontainer for the project                                             # None
    Then Node.js should be available in the devcontainer                                      # None
    And I can execute commands in the devcontainer                                            # None
    When I stop the devcontainer                                                              # None
    Then the container should be removed                                                      # None

Feature: Edge Cases and Negative Tests # tests/e2e/features/edge-cases.feature:1
  As a developer
  I want the system to handle edge cases gracefully
  So that I get clear error messages and predictable behavior
  @edge-case @negative
  Scenario: Invalid template name should fail gracefully                                 # tests/e2e/features/edge-cases.feature:7
    Given I am using the "shell-script" generator                                        # tests/e2e/features/steps/generator_steps.py:11
    When I attempt to create a project named "test-invalid" using template "nonexistent" # tests/e2e/features/steps/edge_case_steps.py:54
    Then project creation should fail                                                    # tests/e2e/features/steps/edge_case_steps.py:67
    And error message should mention invalid template                                    # tests/e2e/features/steps/edge_case_steps.py:91

  @edge-case @negative
  Scenario: Invalid preset should fail gracefully                                                                           # tests/e2e/features/edge-cases.feature:14
    Given I am using the "shell-script" generator                                                                           # tests/e2e/features/steps/generator_steps.py:11
    When I attempt to create a project named "test-invalid-preset" using template "python" with preset "nonexistent-preset" # tests/e2e/features/steps/edge_case_steps.py:13
    Then project creation should fail                                                                                       # tests/e2e/features/steps/edge_case_steps.py:67
    And error message should mention invalid preset                                                                         # tests/e2e/features/steps/edge_case_steps.py:97

  @edge-case @negative
  Scenario: Invalid language version should fail gracefully                                                      # tests/e2e/features/edge-cases.feature:21
    Given I am using the "shell-script" generator                                                                # tests/e2e/features/steps/generator_steps.py:11
    When I attempt to create a project named "test-invalid-version" using template "python" with version "99.99" # tests/e2e/features/steps/edge_case_steps.py:27
    Then project creation should fail                                                                            # tests/e2e/features/steps/edge_case_steps.py:67
    And error message should mention invalid version                                                             # tests/e2e/features/steps/edge_case_steps.py:103

  @edge-case @negative
  Scenario: Project name with spaces should be rejected                                         # tests/e2e/features/edge-cases.feature:28
    Given I am using the "shell-script" generator                                               # tests/e2e/features/steps/generator_steps.py:11
    When I attempt to create a project named "test project with spaces" using template "python" # tests/e2e/features/steps/edge_case_steps.py:54
    Then project creation should fail                                                           # tests/e2e/features/steps/edge_case_steps.py:67
    And error message should mention "Project name can only contain"                            # tests/e2e/features/steps/edge_case_steps.py:79

  @edge-case
  Scenario: Project name with dashes should work                                     # tests/e2e/features/edge-cases.feature:35
    Given I am using the "shell-script" generator                                    # tests/e2e/features/steps/generator_steps.py:11
    When I create a project named "test-project-with-dashes" using template "python" # tests/e2e/features/steps/generator_steps.py:71
    Then the project should be created successfully                                  # tests/e2e/features/steps/validation_steps.py:23
    And the devcontainer should build successfully                                   # tests/e2e/features/steps/container_steps.py:39

  @edge-case
  Scenario: Project name with underscores should work                                     # tests/e2e/features/edge-cases.feature:42
    Given I am using the "shell-script" generator                                         # tests/e2e/features/steps/generator_steps.py:11
    When I create a project named "test_project_with_underscores" using template "python" # tests/e2e/features/steps/generator_steps.py:71
    Then the project should be created successfully                                       # tests/e2e/features/steps/validation_steps.py:23
    And the devcontainer should build successfully                                        # tests/e2e/features/steps/container_steps.py:39

  @edge-case
  Scenario: Project name with numbers should work                             # tests/e2e/features/edge-cases.feature:49
    Given I am using the "shell-script" generator                             # tests/e2e/features/steps/generator_steps.py:11
    When I create a project named "test123project456" using template "python" # tests/e2e/features/steps/generator_steps.py:71
    Then the project should be created successfully                           # tests/e2e/features/steps/validation_steps.py:23
    And the devcontainer should build successfully                            # tests/e2e/features/steps/container_steps.py:39

  @edge-case
  Scenario: Very long project name should be handled                                                                         # tests/e2e/features/edge-cases.feature:56
    Given I am using the "shell-script" generator                                                                            # tests/e2e/features/steps/generator_steps.py:11
    When I create a project named "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa" using template "python" # tests/e2e/features/steps/generator_steps.py:71
    Then the project should be created successfully                                                                          # tests/e2e/features/steps/validation_steps.py:23

  @edge-case @negative
  Scenario: Empty project name should fail                              # tests/e2e/features/edge-cases.feature:62
    Given I am using the "shell-script" generator                       # tests/e2e/features/steps/generator_steps.py:11
    When I attempt to create a project named "" using template "python" # tests/e2e/features/steps/edge_case_steps.py:41
    Then project creation should fail                                   # tests/e2e/features/steps/edge_case_steps.py:67

  @edge-case @negative
  Scenario: Project name with unicode characters should be rejected                # tests/e2e/features/edge-cases.feature:68
    Given I am using the "shell-script" generator                                  # tests/e2e/features/steps/generator_steps.py:11
    When I attempt to create a project named "test-проект" using template "python" # tests/e2e/features/steps/edge_case_steps.py:54
    Then project creation should fail                                              # tests/e2e/features/steps/edge_case_steps.py:67
    And error message should mention "Project name can only contain"               # tests/e2e/features/steps/edge_case_steps.py:79

  @edge-case
  Scenario: Creating project in existing directory should fail or overwrite          # tests/e2e/features/edge-cases.feature:75
    Given I am using the "shell-script" generator                                    # tests/e2e/features/steps/generator_steps.py:11
    And a project named "test-existing" already exists                               # tests/e2e/features/steps/edge_case_steps.py:109
    When I attempt to create a project named "test-existing" using template "python" # tests/e2e/features/steps/edge_case_steps.py:54
    Then project creation should handle existing directory appropriately             # tests/e2e/features/steps/edge_case_steps.py:121

  @edge-case
  Scenario: Single character project name should work         # tests/e2e/features/edge-cases.feature:82
    Given I am using the "shell-script" generator             # tests/e2e/features/steps/generator_steps.py:11
    When I create a project named "a" using template "python" # tests/e2e/features/steps/generator_steps.py:71
    Then the project should be created successfully           # tests/e2e/features/steps/validation_steps.py:23

Feature: Multi-Version Language Support # tests/e2e/features/multi-version.feature:1
  As a developer
  I want to use different language versions
  So that I can match my project's requirements
  @version
  Scenario: Python 3.11 creates valid project                                                   # tests/e2e/features/multi-version.feature:7
    Given I am using the "shell-script" generator                                               # tests/e2e/features/steps/generator_steps.py:11
    When I create a project named "test-python-311" using template "python" with version "3.11" # tests/e2e/features/steps/container_steps.py:27
    Then the project should be created successfully                                             # tests/e2e/features/steps/validation_steps.py:23
    And the devcontainer should build successfully                                              # tests/e2e/features/steps/container_steps.py:39
    And Python 3.11 should be installed in the container                                        # tests/e2e/features/steps/container_steps.py:57

  @version
  Scenario: Python 3.10 creates valid project                                                   # tests/e2e/features/multi-version.feature:15
    Given I am using the "shell-script" generator                                               # tests/e2e/features/steps/generator_steps.py:11
    When I create a project named "test-python-310" using template "python" with version "3.10" # tests/e2e/features/steps/container_steps.py:27
    Then the project should be created successfully                                             # tests/e2e/features/steps/validation_steps.py:23
    And the devcontainer should build successfully                                              # tests/e2e/features/steps/container_steps.py:39
    And Python 3.10 should be installed in the container                                        # tests/e2e/features/steps/container_steps.py:57

  @version
  Scenario: Node.js 20 creates valid project                                                 # tests/e2e/features/multi-version.feature:23
    Given I am using the "shell-script" generator                                            # tests/e2e/features/steps/generator_steps.py:11
    When I create a project named "test-nodejs-20" using template "nodejs" with version "20" # tests/e2e/features/steps/container_steps.py:27
    Then the project should be created successfully                                          # tests/e2e/features/steps/validation_steps.py:23
    And the devcontainer should build successfully                                           # tests/e2e/features/steps/container_steps.py:39
    And Node.js 20 should be installed in the container                                      # tests/e2e/features/steps/container_steps.py:80

  @version
  Scenario: Node.js 18 creates valid project                                                 # tests/e2e/features/multi-version.feature:31
    Given I am using the "shell-script" generator                                            # tests/e2e/features/steps/generator_steps.py:11
    When I create a project named "test-nodejs-18" using template "nodejs" with version "18" # tests/e2e/features/steps/container_steps.py:27
    Then the project should be created successfully                                          # tests/e2e/features/steps/validation_steps.py:23
    And the devcontainer should build successfully                                           # tests/e2e/features/steps/container_steps.py:39
    And Node.js 18 should be installed in the container                                      # tests/e2e/features/steps/container_steps.py:80

  @version
  Scenario: Rust stable creates valid project                                                    # tests/e2e/features/multi-version.feature:39
    Given I am using the "shell-script" generator                                                # tests/e2e/features/steps/generator_steps.py:11
    When I create a project named "test-rust-stable" using template "rust" with version "stable" # tests/e2e/features/steps/container_steps.py:27
    Then the project should be created successfully                                              # tests/e2e/features/steps/validation_steps.py:23
    And the devcontainer should build successfully                                               # tests/e2e/features/steps/container_steps.py:39
    And Rust should be installed in the container                                                # tests/e2e/features/steps/container_steps.py:100

  @version
  Scenario: Go 1.22 creates valid project                                               # tests/e2e/features/multi-version.feature:47
    Given I am using the "shell-script" generator                                       # tests/e2e/features/steps/generator_steps.py:11
    When I create a project named "test-go-122" using template "go" with version "1.22" # tests/e2e/features/steps/container_steps.py:27
    Then the project should be created successfully                                     # tests/e2e/features/steps/validation_steps.py:23
    And the devcontainer should build successfully                                      # tests/e2e/features/steps/container_steps.py:39
    And Go should be installed in the container                                         # tests/e2e/features/steps/container_steps.py:112

  @version
  Scenario: Go 1.21 creates valid project                                               # tests/e2e/features/multi-version.feature:55
    Given I am using the "shell-script" generator                                       # tests/e2e/features/steps/generator_steps.py:11
    When I create a project named "test-go-121" using template "go" with version "1.21" # tests/e2e/features/steps/container_steps.py:27
    Then the project should be created successfully                                     # tests/e2e/features/steps/validation_steps.py:23
    And the devcontainer should build successfully                                      # tests/e2e/features/steps/container_steps.py:39
    And Go should be installed in the container                                         # tests/e2e/features/steps/container_steps.py:112

Feature: Node.js Template # tests/e2e/features/nodejs-template.feature:1
  As a developer
  I want to create a Node.js project with devcontainer
  So that I can start API development
  Scenario: Basic Node.js template creates valid project                                  # tests/e2e/features/nodejs-template.feature:6
    Given I am using the "shell-script" generator                                         # None
    When I create a project named "test-nodejs" using template "nodejs" with version "22" # None
    Then the project should be created successfully                                       # None
    And the project should have dual git repositories                                     # None
    And the devcontainer should build successfully                                        # None
    And Node.js 22 should be installed in the container                                   # None
    And npm should be available in the container                                          # None
    And TypeScript should be installed                                                    # None

  Scenario: Node.js API preset includes TypeScript                                                           # tests/e2e/features/nodejs-template.feature:16
    Given I am using the "shell-script" generator                                                            # None
    When I create a project named "test-api" using template "nodejs" with version "22" and preset "node-api" # None
    Then the project should be created successfully                                                          # None
    And the devcontainer should build successfully                                                           # None
    And TypeScript should be installed                                                                       # None
    And Vitest should be available                                                                           # None

Feature: Preset Coverage # tests/e2e/features/presets.feature:1
  As a developer
  I want all presets to work correctly
  So that I can quickly create projects with pre-configured settings
  @preset
  Scenario: rust-cli preset creates valid project                                              # tests/e2e/features/presets.feature:7
    Given I am using the "shell-script" generator                                              # tests/e2e/features/steps/generator_steps.py:11
    When I create a project named "test-rust-cli" using template "rust" with preset "rust-cli" # tests/e2e/features/steps/generator_steps.py:18
    Then the project should be created successfully                                            # tests/e2e/features/steps/validation_steps.py:23
    And the devcontainer should build successfully                                             # tests/e2e/features/steps/container_steps.py:39
    And Rust should be installed in the container                                              # tests/e2e/features/steps/container_steps.py:100
    And cargo should be available in the container                                             # tests/e2e/features/steps/container_steps.py:193
    And clippy should be available                                                             # tests/e2e/features/steps/preset_steps.py:13
    And rustfmt should be available                                                            # tests/e2e/features/steps/preset_steps.py:36

  @preset
  Scenario: go-service preset creates valid project                                              # tests/e2e/features/presets.feature:18
    Given I am using the "shell-script" generator                                                # tests/e2e/features/steps/generator_steps.py:11
    When I create a project named "test-go-service" using template "go" with preset "go-service" # tests/e2e/features/steps/generator_steps.py:18
    Then the project should be created successfully                                              # tests/e2e/features/steps/validation_steps.py:23
    And the devcontainer should build successfully                                               # tests/e2e/features/steps/container_steps.py:39
    And Go should be installed in the container                                                  # tests/e2e/features/steps/container_steps.py:112
    And golangci-lint should be available                                                        # tests/e2e/features/steps/container_steps.py:205

  @preset
  Scenario: minimal preset creates valid project                                                # tests/e2e/features/presets.feature:27
    Given I am using the "shell-script" generator                                               # tests/e2e/features/steps/generator_steps.py:11
    When I create a project named "test-minimal" using template "generic" with preset "minimal" # tests/e2e/features/steps/generator_steps.py:18
    Then the project should be created successfully                                             # tests/e2e/features/steps/validation_steps.py:23
    And the devcontainer should build successfully                                              # tests/e2e/features/steps/container_steps.py:39

  @preset
  Scenario: fullstack preset creates valid project                                                                  # tests/e2e/features/presets.feature:34
    Given I am using the "shell-script" generator                                                                   # tests/e2e/features/steps/generator_steps.py:11
    When I create a project named "test-fullstack" using template "nodejs" with version "22" and preset "fullstack" # tests/e2e/features/steps/container_steps.py:14
    Then the project should be created successfully                                                                 # tests/e2e/features/steps/validation_steps.py:23
    And the devcontainer should build successfully                                                                  # tests/e2e/features/steps/container_steps.py:39
    And TypeScript should be installed                                                                              # tests/e2e/features/steps/container_steps.py:177

Feature: Python Template # tests/e2e/features/python-template.feature:1
  As a developer
  I want to create a Python project with devcontainer
  So that I can start coding immediately
  Scenario: Basic Python template creates valid project                                     # tests/e2e/features/python-template.feature:6
    Given I am using the "shell-script" generator                                           # None
    When I create a project named "test-python" using template "python" with version "3.12" # None
    Then the project should be created successfully                                         # None
    And the project should have dual git repositories                                       # None
    And the devcontainer should build successfully                                          # None
    And Python 3.12 should be installed in the container                                    # None
    And uv should be available in the container                                             # None
    And pytest should be available in the container                                         # None

  Scenario: Python ML preset includes Jupyter                                                                  # tests/e2e/features/python-template.feature:16
    Given I am using the "shell-script" generator                                                              # None
    When I create a project named "test-ml" using template "python" with version "3.12" and preset "python-ml" # None
    Then the project should be created successfully                                                            # None
    And the devcontainer should build successfully                                                             # None
    And Jupyter should be installed in the container                                                           # None
    And numpy should be importable                                                                             # None
    And pandas should be importable                                                                            # None

  Scenario: Python web preset includes web tools                                                                 # tests/e2e/features/python-template.feature:25
    Given I am using the "shell-script" generator                                                                # None
    When I create a project named "test-web" using template "python" with version "3.12" and preset "python-web" # None
    Then the project should be created successfully                                                              # None
    And the devcontainer should build successfully                                                               # None
    And pytest should be available in the container                                                              # None

Feature: VS Code Compatibility # tests/e2e/features/vscode-compatibility.feature:1
  As a developer
  I want the devcontainer to work in VS Code
  Scenario: devcontainer.json is valid for Python template                                         # tests/e2e/features/vscode-compatibility.feature:5
    Given I am using the "shell-script" generator                                                  # None
    When I create a project named "test-vscode-python" using template "python" with version "3.12" # None
    Then the project should be created successfully                                                # None
    And devcontainer.json should be valid JSON                                                     # None
    And devcontainer.json should contain field "image"                                             # None
    And devcontainer.json should specify VS Code extensions                                        # None
    And the devcontainer should build successfully                                                 # None
    And claude command should exist in the container                                               # None
    And claude --version command should work                                                       # None

  Scenario: devcontainer.json is valid for Node.js template                                      # tests/e2e/features/vscode-compatibility.feature:16
    Given I am using the "shell-script" generator                                                # None
    When I create a project named "test-vscode-nodejs" using template "nodejs" with version "22" # None
    Then the project should be created successfully                                              # None
    And devcontainer.json should be valid JSON                                                   # None
    And devcontainer.json should contain field "image"                                           # None
    And devcontainer.json should specify VS Code extensions                                      # None

